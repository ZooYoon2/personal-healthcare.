<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="dev.mvc.exercise.ExerciseDAOInter"> 
  <!-- 등록 -->
  <insert id="create" parameterType="dev.mvc.exercise.ExerciseVO">
    INSERT INTO EXERCISE(EXERCISE_NO,EXERCISE_TYPE_NO,EXERCISE_NAME,EXERCISE_EQ,EXERCISE_PRO,EXERCISE_INFO,EXERCISE_PRECAU,EXERCISE_YOUTUBE
                        ,EXERCISE_CHAR,ADMINNO,EXERCISE_DATE,file1, file1saved, thumb1, size1)
    VALUES(EXERCISE_SEQ.nextval,#{EXERCISE_TYPE_NO},#{EXERCISE_NAME},#{EXERCISE_EQ},#{EXERCISE_PRO},#{EXERCISE_INFO},#{EXERCISE_PRECAU},#{EXERCISE_YOUTUBE}
                        ,#{EXERCISE_CHAR},#{ADMINNO},sysdate,#{file1}, #{file1saved}, #{thumb1}, #{size1})
  </insert>
  
  <!-- 운동 종류에 따른 목록 출력 -->
  <select id="list_by_exertypeno" resultType="dev.mvc.exercise.ExerciseVO" parameterType="int">
    SELECT EXERCISE_NO,EXERCISE_TYPE_NO,EXERCISE_NAME,EXERCISE_EQ,EXERCISE_PRO,EXERCISE_INFO,EXERCISE_PRECAU,EXERCISE_YOUTUBE
                        ,EXERCISE_CHAR,ADMINNO,EXERCISE_DATE,file1, file1saved, thumb1, size1
    FROM EXERCISE
    WHERE EXERCISE_TYPE_NO = #{EXERCISE_TYPE_NO}
    ORDER BY EXERCISE_NO DESC
  </select> 
  
  <!-- 운동 조회 -->
  <select id="read" resultType="dev.mvc.exercise.ExerciseVO" parameterType="int">
    SELECT EXERCISE_NO,EXERCISE_TYPE_NO,EXERCISE_NAME,EXERCISE_EQ,EXERCISE_PRO,EXERCISE_INFO,EXERCISE_PRECAU,EXERCISE_YOUTUBE
                        ,EXERCISE_CHAR,ADMINNO,EXERCISE_DATE,file1, file1saved, thumb1, size1
    FROM EXERCISE
    WHERE EXERCISE_NO = #{EXERCISE_NO}
  </select>
  
  <!-- 운동 수정 -->
  <update id="update" parameterType="dev.mvc.exercise.ExerciseVO">
    UPDATE EXERCISE
    SET EXERCISE_NAME=#{EXERCISE_NAME},EXERCISE_EQ=#{EXERCISE_EQ},EXERCISE_PRO=#{EXERCISE_PRO}
                        ,EXERCISE_INFO=#{EXERCISE_INFO},EXERCISE_PRECAU=#{EXERCISE_PRECAU}
                        ,EXERCISE_CHAR=#{EXERCISE_CHAR},ADMINNO=#{ADMINNO},EXERCISE_DATE=sysdate
    WHERE EXERCISE_NO = #{EXERCISE_NO}
  </update>
 <!--   ,EXERCISE_YOUTUBE=#{EXERCISE_YOUTUBE}
,file1=#{file1}, file1saved=#{file1saved}, thumb1=#{thumb1}, size1=#{size1}-->
  <!-- 운동 삭제 -->
  <delete id="delete" parameterType="int">
    DELETE FROM EXERCISE
    WHERE EXERCISE_NO = #{EXERCISE_NO}
  </delete>
  
    <!-- 운동에 따른 리뷰 출력 -->
  <select id="rev_list_by_exerciseno" resultType="dev.mvc.exercise.ExerrevVO" parameterType="int">
    SELECT E.EXERREV_NO,E.MEMBERNO,E.EXERREV_CONTENT,E.EXERREV_DATE,E.EXERREV_RECOM,E.EXERCISE_NO,M.MNAME
		FROM EXERREV E, MEMBER M
		WHERE E.MEMBERNO = M.MEMBERNO
		AND E.EXERCISE_NO = #{EXERCISE_NO}
		ORDER BY E.EXERREV_DATE DESC
  </select> 
  
  <!-- 운동 리뷰 등록 -->
  <insert id="rev_create" parameterType= "dev.mvc.exercise.ExerrevVO">
    INSERT INTO EXERREV(EXERREV_NO,MEMBERNO,EXERREV_CONTENT,EXERREV_DATE,EXERREV_RECOM,EXERCISE_NO)
    VALUES(EXERREV_SEQ.nextval,#{MEMBERNO},#{EXERREV_CONTENT},sysdate,#{EXERREV_RECOM},#{EXERCISE_NO})
  </insert>
  
  <!-- 운동 삭제 -->
  <delete id="rev_delete" parameterType="int">
    DELETE FROM EXERREV
    WHERE EXERCREV_NO = #{EXERREV_NO}
  </delete>

</mapper> 